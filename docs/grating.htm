<html>
<head>
    <link rel="stylesheet" href="https://pages.nist.gov/nist-header-footer/css/nist-combined.css">
    <script src="https://pages.nist.gov/nist-header-footer/js/jquery-1.9.0.min.js" type="text/javascript" defer="defer"></script>
    <script src="https://pages.nist.gov/nist-header-footer/js/nist-header-footer.js" type="text/javascript" defer="defer"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            // Mark external (non-nist.gov) A tags with class "external"
            //If the adress start with https and ends with nist.gov
            var re_nist = new RegExp('^https?:\/\/((^\/)*\.)*nist\\.gov(\/|$)');
            //Regex to find address that start with https
            var re_absolute_address = new RegExp('^((https?:)?\/\/)');
            $("a").each(function () {
                var url = $(this).attr('href');
                if (re_nist.test(url) || !re_absolute_address.test(url)) {
                    $(this).addClass('local');
                } else {
                    $(this).addClass('external');
                }
            });
            // Add leaveNotice to external A elements
            $('a.external').leaveNotice({
                siteName: 'the NIST fork of the leaveNotice jQuery plugin',
            });
        });
    </script>

    <meta name="generator" content="HTML Tidy for Cygwin (vers 1st September 2004), see www.w3.org">
    <link rel="STYLESHEET" href="style.css" type="text/css">

    <title>SCATMECH: Grating</title>
    <script async type="text/javascript" id="_fed_an_ua_tag" src="https://dap.digitalgov.gov/Universal-Federated-Analytics-Min.js?agency=NIST&subagency=github&pua=UA-66610693-1&yt=true&exts=ppsx,pps,f90,sch,rtf,wrl,txz,m1v,xlsm,msi,xsd,f,tif,eps,mpg,xml,pl,xlt,c"></script>
</head>

<body><br>
  <a name="top" id="top"><!-- --></a>

  <table width="98%" border="0" cellpadding="0" cellspacing="0"
  align="center">
    <tr>
      <td>
        <p class="nav"><a href="index.htm">SCATMECH</a> &gt; <a href=
        "classes.htm">Classes and Functions</a> &gt;
        <a href="classes.htm#PropertyModels">Property Models</a>
        &gt; Grating</p>

	<h1>Abstract class Grating</h1>
        
        <hr>
	<p>
        The abstract class <b>Grating</b> is used by <a href="rcwmodel.htm">RCW_Model</a> and <a href=
        "rcwbrdf.htm">RCW_BRDF_Model</a> to describe a periodic grating. There are several instantiable models currently available that inherit <b>Grating</b>:
	<ul>
	<li><a href="#generic">Generic_Grating</a>: A grating described by a grating description file.  This description is the most general
	and can describe nearly any grating.
	<li><a href="#sinusoid">Sinusoidal_Relief_Grating</a>: A grating having a sinusoidal relief profile.
        <li><a href="#triangular">Triangular_Grating</a>: A grating having a triangular profile.
        <li><a href="#corner">Corner_Rounded_Grating</a>: A trapezoidal grating with rounded corners.
        <li><a href="#singleline">Single_Line_Grating</a>: A trapezoidal grating.
	<li><a href="#volume">Sinusoidal_Volume_Grating</a>: A volume grating with a sinusoidal variation in the dielectric function.
        <li><a href="#nullgrating">Dielectric_Stack_Grating</a>: A trivial grating consisting of a stack of films, possibly anisotropic and/or magnetic.
	<li><a href="#overlaid">Overlaid_Grating</a>: Two gratings, one on top of the other.
	</ul>

	<p><b>Grating</b> provides <a href="rcwmodel.htm">RCW_Model</a> with the number of layers in a grating,
	the thickness of each layer, the
	materials above and below the grating,
	and the the Fourier expansion coefficients for the dielectric function in each layer.</p>

        <h2>Instantiable Models and Their Parameters:</h2>

        <table border="1" cellpadding="5">
          <tr>
            <th>Parameter</th>
            <th>Data Type</th>
            <th>Description</th>
            <th>Default</th>
          </tr>

          <tr>
            <td colspan="4" class="model">

            <p><a href="#top"><span class="totop">Top of Page</span></a></p>

	    <a name="generic"><b>Generic_Grating</b></a>: A grating described by a grating definition file.  The format of this file is described <a href="#file">below</a>.<br>
	    The fiducial (where <i>x</i>=0) is defined by the coordinates used in the definition.</td>
          </tr>

          <tr>
            <td class="parameter">period</td>
            <td class="datatype">double</td>
            <td class="description">The period of the grating [&#181;m]. This parameter is overridden by a period specified in the file.<br>
            (Inherited from <b>Grating</b>.)</td>
            <td class="default">1</td>
          </tr>

          <tr>
            <td class="parameter">medium_i</td>
            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>
            <td class="description">The
            optical constants of the incident medium, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength. The material must be non-absorbing
            (k=0). <br>
	    (Inherited from <b>Grating</b>.)
	    </td>

            <td class="default">(1,0)</td>
          </tr>

          <tr>
            <td class="parameter">medium_t</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the transmitting medium (usually
            the substrate), expressed as a complex number (n,k) or,
            optionally, as a function of wavelength.<br>
	    (Inherited from <b>Grating</b>.)
	    </td>

            <td class="default">(4.05,0.05)</td>
          </tr>

          <tr>
            <td class="parameter">filename</td>

            <td class="datatype">string</td>

            <td class="description">The name
            of the file containing the grating description. The
            format of the file is described <a href="#file">below</a>.<br></td>

            <td class="default"><i>no default</i></td>
          </tr>

          <tr>
            <td class="parameter">pstring</td>

            <td class="datatype">string</td>

            <td class="description">A string containing a comma-delimited list of the parameter values enclosed in 
	    parentheses.  <a href="#file">See below</a>.<br></td>

            <td class="default"><i>no default</i></td>
          </tr>

          <tr>
            <td class="parameter">nlayers</td>

            <td class="datatype">int</td>

            <td class="description">The approximate number of levels to be used in the staircase approximation.
	    This value may differ from the actual value due to round-off error or other considerations.
	     <a href="#file">See below</a>.<br></td>

            <td class="default">20</td>
          </tr>

          <tr>
            <td colspan="4" class="model">
	      <p><a href="#top"><span class="totop">Top of Page</span></a></p>
              <a name="sinusoid"><b>Sinusoidal_Relief_Grating</b></a>:
              A grating consisting of a film having a sinusoidal relief profile.<br>
	      The fiducial (where <i>x</i>=0) is defined by the location of the highest point of the sinusoid.<br>
              <center>
                <img src=
                "Images/sinusoid.jpg" alt=
                "Diagram showing a sinusoidal relief grating.">
              </center>
            </td>
          </tr>

          <tr>
           <td class="parameter">period</td>

            <td class="datatype">double</td>

            <td class="description">The
            period of the grating [&#181;m].<br>
	    (Inherited from <b>Grating</b>.)
            </td>

            <td class="default">1</td>
          </tr>

          <tr>
            <td class="parameter">medium_i</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the incident medium, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength. The material must be non-absorbing
            (k=0). <br>
	    (Inherited from <b>Grating</b>.)
	    </td>

            <td class="default">(1,0)</td>
          </tr>

          <tr>
            <td class="parameter">medium_t</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the transmitting medium (usually
            the substrate), expressed as a complex number (n,k) or,
            optionally, as a function of wavelength.<br>
	    (Inherited from <b>Grating</b>.)</td>

            <td class="default">(4.05,0.05)</td>
          </tr>

          <tr>
            <td class="parameter">amplitude</td>

            <td class="datatype">double</td>

            <td class="description">The
            amplitude of the sinusoid, measured from peak to valley
            [&#181;m].</td>

            <td class="default">0.4</td>
          </tr>

          <tr>
            <td class="parameter">base</td>

            <td class="datatype">double</td>

            <td class="description">The
            thickness of extra material beneath the sinusoid
            [&#181;m].</td>

            <td class="default">0</td>
          </tr>

          <tr>
            <td class="parameter">option</td>

            <td class="datatype">int</td>

            <td class="description">This parameter defines whether the steps are evenly spaced 
	      horizontally (<tt>option=0</tt> or vertically (<tt>option=1</tt>).</td>

            <td class="default">0</td>
          </tr>

          <tr>
            <td class="parameter">nlevels</td>

            <td class="datatype">int</td>

            <td class="description">The
            number of levels in the grating for the staircase
            approximation.</td>

            <td class="default">20</td>
          </tr>

          <tr>
            <td class="parameter">material</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the grating material, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength.</td>

            <td class="default">(4.05,0.05)</td>
          </tr>


          <tr>
            <td colspan="4" class="model">
	      <p><a href="#top"><span class="totop">Top of Page</span></a></p>
              <a name="triangular"><b>Triangular_Grating</b></a>:
              A grating having a triangular profile<br>
	      The fiducial (where <i>x</i>=0) is defined as the midpoint of the base of the triangle.<br>

              <center>
                <img src=
                "Images/triangular.jpg" alt=
                "Diagram showing a triangular grating.">
              </center>
            </td>
          </tr>

          <tr>
            <td class="parameter">period</td>

            <td class="datatype">double</td>

            <td class="description">The
            period of the grating [&#181;m].<br>
            (Inherited from <b>Grating</b>.)</td>

            <td class="default">1</td>
          </tr>

          <tr>
            <td class="parameter">medium_i</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the incident medium, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength. The material must be non-absorbing
            (k=0). <br>
	    Inherited from <b>Grating</b>.
	    </td>

            <td class="default">(1,0)</td>
          </tr>

          <tr>
            <td class="parameter">medium_t</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the transmitting medium (usually
            the substrate), expressed as a complex number (n,k) or,
            optionally, as a function of wavelength.<br>
	    Inherited from <b>Grating</b>.</td>

            <td class="default">(4.05,0.05)</td>
          </tr>

          <tr>
            <td class="parameter">material</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the grating material, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength.</td>

            <td class="default">(4.05,0.05)</td>
          </tr>

          <tr>
            <td class="parameter">amplitude</td>

            <td class="datatype">double</td>

            <td class="description">The
            peak-to-valley amplitude of the
            grating.<br></td>

            <td class="default">0.4</td>
          </tr>

          <tr>
            <td class="parameter">aspect</td>

            <td class="datatype">double</td>

            <td class="description">The
            aspect ratio of the triangle. For aspect=0.5, the
            grating is symmetric.</td>

            <td class="default">0.5</td>
          </tr>

          <tr>
            <td class="parameter">nlevels</td>

            <td class="datatype">int</td>

            <td class="description">The
            number of levels in the grating for the staircase
            approximation.</td>

            <td class="default">20</td>
          </tr>

          <tr>
            <td colspan="4" class="model">
              <p><a href="#top"><span class="totop">Top of Page</span></a></p>
              <a name="corner"><b>Corner_Rounded_Grating</b></a>:
              A trapezoidal grating with rounded
              corners.<br>
	      The fiducial (where <i>x</i>=0) is defined as the middle of the line.<br>

              <center>
                <img src=
                "Images/cornerrounded.jpg" alt=
                "Diagram showing a trapezoidal grating with rounded corners.">
                
              </center>
            </td>
          </tr>

          <tr>
            <td class="parameter">period</td>

            <td class="datatype">double</td>

            <td class="description">The
            period of the grating [&#181;m].<br>
            (Inherited from <b>Grating</b>.)</td>

            <td class="default">1</td>
          </tr>

          <tr>
            <td class="parameter">medium_i</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the incident medium, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength. The material must be non-absorbing
            (k=0). <br>
	    (Inherited from <b>Grating</b>.)
	    </td>

            <td class="default">(1,0)</td>
          </tr>

          <tr>
            <td class="parameter">medium_t</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the transmitting medium (usually
            the substrate), expressed as a complex number (n,k) or,
            optionally, as a function of wavelength.<br>
	    (Inherited from <b>Grating</b>.)</td>

            <td class="default">(4.05,0.05)</td>
          </tr>
          <tr>
            <td class="parameter">material</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the grating material, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength.</td>

            <td class="default">(4.05,0.05)</td>
          </tr>

          <tr>
            <td class="parameter">height</td>

            <td class="datatype">double</td>

            <td class="description">The
            height of the line in the grating
            [&#181;m].<br></td>

            <td class="default">0.1</td>
          </tr>

          <tr>
            <td class="parameter">width</td>

            <td class="datatype">double</td>

            <td class="description">The base
            width of the trapezoid, before rounding the corners
            [&#181;m].</td>

            <td class="default">0.1</td>
          </tr>

          <tr>
            <td class="parameter">sidewall</td>

            <td class="datatype">double</td>

            <td class="description">The
            sidewall angle of the trapezoid, before corner rounding
            [degrees].</td>

            <td class="default">88</td>
          </tr>

          <tr>
            <td class="parameter">radiust</td>

            <td class="datatype">double</td>

            <td class="description">The
            radius of curvature of the top corners of the trapezoid
            [&#181;m].</td>

            <td class="default">0.01</td>
          </tr>

          <tr>
            <td class="parameter">radiusb</td>

            <td class="datatype">double</td>

            <td class="description">The
            radius of curvature of the bottom corners of the
            trapezoid [&#181;m].</td>

            <td class="default">0.001</td>
          </tr>

          <tr>
            <td class="parameter">nlevels</td>

            <td class="datatype">int</td>

            <td class="description">The
            number of levels in the grating for the staircase
            approximation.</td>

            <td class="default">10</td>
          </tr>

          <tr>
            <td colspan="4" class="model">
             <p><a href="#top"><span class="totop">Top of Page</span></a></p>
              <a name="singleline"><b>Single_Line_Grating</b></a>:
              A trapezoidal grating.<br>
	      The fiducial (where <i>x</i>=0) is defined as the middle of the top of the line.<br>
              <center>
                <img src=
                "Images/singleline.jpg" alt=
                "A diagram showing a trapezoidal grating.">
              </center>
            </td>
          </tr>

          <tr>
            <td class="parameter">period</td>

            <td class="datatype">double</td>

            <td class="description">The
            period of the grating [&#181;m].<br>
            (Inherited from <b>Grating</b>.)</td>

            <td class="default">1</td>
          </tr>

          <tr>
            <td class="parameter">medium_i</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the incident medium, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength. The material must be non-absorbing
            (k=0). <br>
	    (Inherited from <b>Grating</b>.)
	    </td>

            <td class="default">(1,0)</td>
          </tr>

          <tr>
            <td class="parameter">medium_t</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the transmitting medium (usually
            the substrate), expressed as a complex number (n,k) or,
            optionally, as a function of wavelength.<br>
	    (Inherited from <b>Grating</b>.)</td>

            <td class="default">(4.05,0.05)</td>
          </tr>

          <tr>
            <td class="parameter">material</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the grating material, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength.</td>

            <td class="default">(4.05,0.05)</td>
          </tr>

          <tr>
            <td class="parameter">space</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the material between the
            trapezoid, expressed as a complex number (n,k) or,
            optionally, as a function of wavelength.</td>

            <td class="default">(1,0)</td>
          </tr>

          <tr>
            <td class="parameter">height</td>

            <td class="datatype">double</td>

            <td class="description">The
            height of the line in the grating
            [&#181;m].<br></td>

            <td class="default">0.2</td>
          </tr>

          <tr>
            <td class="parameter">bottomwidth</td>

            <td class="datatype">double</td>

            <td class="description">The base
            width of the trapezoid [&#181;m].</td>

            <td class="default">0.2</td>
          </tr>

          <tr>
            <td class="parameter">topwidth</td>

            <td class="datatype">double</td>

            <td class="description">The top
            width of the trapezoid [&#181;m].</td>

            <td class="default">0.2</td>
          </tr>

          <tr>
            <td class="parameter">offset</td>

            <td class="datatype">double</td>

            <td class="description">The
            offset of the top of the trapezoid compared to the
            bottom [&#181;m].</td>

            <td class="default">0</td>
          </tr>

          <tr>
            <td class="parameter">nlevels</td>

            <td class="datatype">int</td>

            <td class="description">The
            number of levels in the grating for the staircase
            approximation.</td>

            <td class="default">10</td>
          </tr>

          <tr>
            <td colspan="4" class="model">
             <p><a href="#top"><span class="totop">Top of Page</span></a></p>
              <a name="volume"><b>Sinusoidal_Volume_Grating</b></a>:
              A volume grating consisting of a film, whose dielectric function varies sinusoidal along the grating direction.<br>
	      The fiducial (where <i>x</i>=0) is defined as the location of the maximum index at the top of the grating.<br>
              <center>
                <img src=
                "Images/volumegrating.jpg" alt=
                "A diagram showing a volume grating. Four periods and a tilt angle of about 20 degrees are shown.">
              </center>
            </td>
          </tr>

          <tr>
            <td class="parameter">period</td>

            <td class="datatype">double</td>

            <td class="description">The
            period of the grating [&#181;m].<br>
            (Inherited from <b>Grating</b>.)</td>

            <td class="default">1</td>
          </tr>

          <tr>
            <td class="parameter">medium_i</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the incident medium, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength. The material must be non-absorbing
            (k=0). <br>
	    (Inherited from <b>Grating</b>.)
	    </td>

            <td class="default">(1,0)</td>
          </tr>

          <tr>
            <td class="parameter">medium_t</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the transmitting medium (usually
            the substrate), expressed as a complex number (n,k) or,
            optionally, as a function of wavelength.<br>
	    (Inherited from <b>Grating</b>.)</td>

            <td class="default">(4.05,0.05)</td>
          </tr>

          <tr>
            <td class="parameter">minimum</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the grating material associated with the troughs in the dielectric function, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength.</td>

            <td class="default">(1.50,0)</td>
          </tr>

          <tr>
            <td class="parameter">maximum</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the grating material associated with the peaks in the dielectric function, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength.</td>

            <td class="default">(1.52,0)</td>
          </tr>

          <tr>
            <td class="parameter">thick</td>

            <td class="datatype">double</td>

            <td class="description">The thickness of the 
	      volume grating.
            [&#181;m].<br></td>

            <td class="default">0.1</td>
          </tr>

          <tr>
            <td class="parameter">tilt</td>

            <td class="datatype">double</td>

            <td class="description">The tilt angle of the volume grating [degrees]. When the
	      value of <b>tilt</b> is 0, the dielectric function varies only in the grating direction. When it is 
	      non-zero, the dielectric function also varies with vertical position in the grating.
	    </td>

            <td class="default">0</td>
          </tr>

          <tr>
            <td class="parameter">nlevels</td>

            <td class="datatype">int</td>

            <td class="description">The
            number of levels the grating is divided into for the staircase
            approximation.</td>

            <td class="default">1</td>
          </tr>

          <tr>
            <td colspan="4" class="model">
             <p><a href="#top"><span class="totop">Top of Page</span></a></p>
              <a name="nullgrating"><b>Dielectric_Stack_Grating</b></a>:
	      A grating consisting only of a stack of films. The films can be diagonally anisotropic and/or magnetic.<br>

              <center>
                <img src=
                "Images/dielstackgrating.gif" alt=
                "A diagram showing a dielectric stack grating. The coordinate system is shown, as well as the period.">
              </center>
            </td>
          </tr>

          <tr>
            <td class="parameter">period</td>

            <td class="datatype">double</td>

            <td class="description">The
            period of the grating [&#181;m].<br>
            (Inherited from <b>Grating</b>.)</td>

            <td class="default">1</td>
          </tr>

          <tr>
            <td class="parameter">medium_i</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the incident medium, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength. The material must be non-absorbing
            (k=0). <br>
	    (Inherited from <b>Grating</b>.)
	    </td>

            <td class="default">(1,0)</td>
          </tr>

          <tr>
            <td class="parameter">medium_t</td>

            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>

            <td class="description">The
            optical constants of the transmitting medium (usually
            the substrate), expressed as a complex number (n,k) or,
            optionally, as a function of wavelength.<br>
	    (Inherited from <b>Grating</b>.)</td>

            <td class="default">(4.05,0.05)</td>
          </tr>

          <tr>
            <td class="parameter">stackepsx</td>

            <td class="datatype"><a href="stackmodel.htm">StackModel_Ptr</a></td>

            <td class="description">The description of any film stacks on the substrate.
	      This particular stack corresponds to the dielectric function in the <i>x</i> direction (the grating direction).
            <td class="default">No_StackModel</td>
          </tr>

          <tr>
            <td class="parameter">stackepsy</td>

            <td class="datatype"><a href="stackmodel.htm">StackModel_Ptr</a></td>

            <td class="description">The description of any film stacks on the substrate.
	      This particular stack corresponds to the dielectric function in the <i>y</i> direction (the grating direction).
	      If this parameter is set, it must have the same number of layers and the same layer thicknesses as <tt>stackepsx</tt> and <tt>stackepsz</tt> must be set, too.
	      If this parameter is not set (<a href="stackmodel.htm">No_StackModel</a>), then the materials are taken to be isotropic and the dielectric functions taken from <tt>stackepsx</tt>.
            <td class="default">No_StackModel</td>
          </tr>

          <tr>
            <td class="parameter">stackepsz</td>

            <td class="datatype"><a href="stackmodel.htm">StackModel_Ptr</a></td>

            <td class="description">The description of any film stacks on the substrate.
	      This particular stack corresponds to the dielectric function in the <i>z</i> direction (the grating direction).
	      If this parameter is set, it must have the same number of layers and the same layer thicknesses as <tt>stackepsx</tt> and <tt>stackepsy</tt> must be set, too.
	      If this parameter is not set (<a href="stackmodel.htm">No_StackModel</a>), then the materials are taken to be isotropic and the dielectric functions taken from <tt>stackepsx</tt>.
            <td class="default">No_StackModel</td>
          </tr>

          <tr>
            <td class="parameter">stackmux</td>

            <td class="datatype"><a href="stackmodel.htm">StackModel_Ptr</a></td>

            <td class="description">The description of any film stacks on the substrate.
	      This particular stack corresponds to the magnetic function in the <i>x</i> direction (the grating direction). 
	      If this parameter is set, it must have the same number of layers and the same layer thicknesses as <tt>stackepsx</tt>.
	      If this parameter is not set (<a href="stackmodel.htm">No_StackModel</a>), any layers are taken to be nonmagnetic.
            <td class="default">No_StackModel</td>
          </tr>

          <tr>
            <td class="parameter">stackmuy</td>

            <td class="datatype"><a href="stackmodel.htm">StackModel_Ptr</a></td>

            <td class="description">The description of any film stacks on the substrate.
	      This particular stack corresponds to the magnetic function in the <i>y</i> direction (the grating direction). 
	      If this parameter is set, it must have the same number of layers and the same layer thicknesses as <tt>stackepsx</tt>, and <tt>stackmuz</tt> must be set, too.
	      If this parameter is not set (<a href="stackmodel.htm">No_StackModel</a>), any layers are taken to be isotropic.
            <td class="default">No_StackModel</td>
          </tr>

          <tr>
            <td class="parameter">stackmuz</td>

            <td class="datatype"><a href="stackmodel.htm">StackModel_Ptr</a></td>

            <td class="description">The description of any film stacks on the substrate.
	      This particular stack corresponds to the magnetic function in the <i>z</i> direction (the grating direction). 
	      If this parameter is set, it must have the same number of layers and the same layer thicknesses as <tt>stackepsx</tt>, and <tt>stackmuy</tt> must be set, too.
	      If this parameter is not set (<a href="stackmodel.htm">No_StackModel</a>), any layers are taken to be isotropic.
            <td class="default">No_StackModel</td>
          </tr>

          <tr>
            <td colspan="4" class="model">
             <p><a href="#top"><span class="totop">Top of Page</span></a></p>

              <a name="overlaid"><b>Overlaid_Grating</b></a>:
              One grating on top of another. Two gratings with identical periods are specified, one designating the structure on top and the other designating the structure
	      underneath it.  A separation distance between the two and an overlay distance is specified.<br>
	      The fiducial (where <i>x</i>=0) of the grating is defined by that of the lower grating.<br>
              <center>
                <img src=
                "Images/overlaidgrating.gif" alt=
                "A diagram showing an overlaid grating.">
              </center>

            </td>
          </tr>

          <tr>
            <td class="parameter">period</td>
            <td class="datatype">double</td>
            <td class="description">The period of the grating [&#181;m].<br>
            (Inherited from <b>Grating</b>.) </td>
            <td class="default">1</td>
          </tr>

          <tr>
            <td class="parameter">medium_i</td>
            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>
            <td class="description">The
            optical constants of the incident medium, expressed as
            a complex number (n,k) or, optionally, as a function of
            wavelength. The material must be non-absorbing
            (k=0). <br>
	    (Inherited from <b>Grating</b>.)
	    </td>

            <td class="default">(1,0)</td>
          </tr>

          <tr>
            <td class="parameter">medium_t</td>
            <td class="datatype"><a href="dielfunc.htm">dielectric_function</a></td>
            <td class="description">The
            optical constants of the transmitting medium (usually
            the substrate), expressed as a complex number (n,k) or,
            optionally, as a function of wavelength.<br>
	    (Inherited from <b>Grating</b>.)</td>
            <td class="default">(4.05,0.05)</td>
          </tr>

          <tr>
            <td class="parameter">top</td>
            <td class="datatype"><a href="grating.htm">Grating_Ptr</a></td>
            <td class="description">The grating on the top. This grating's period must match the period of the <b>Overlaid_Grating</b>. The incident medium must match
	    <b>medium_i</b>.</td>
            <td class="default">Single_Line_Grating</td>
          </tr>

          <tr>
            <td class="parameter">bottom</td>
            <td class="datatype"><a href="grating.htm">Grating_Ptr</a></td>
            <td class="description">The grating on the bottom. This grating's period must match the period of the <b>Overlaid_Grating</b>. This grating's <b>medium_i</b> must match
	    the above grating's <b>medium_t</b>. This grating's <b>medium_t</b> must match the <b>medium_t</b> of the <b>Overlaid_Grating</b>.</td>
            <td class="default">Single_Line_Grating</td>
          </tr>

          <tr>
            <td class="parameter">overlay</td>
            <td class="datatype">double</td>
            <td class="description">The lateral shift of the top grating relative to the bottom grating [&micro;m]. This shift is with respect to the fiducial for each grating, which may differ from one 
	    grating type to another.</td>
            <td class="default">0</td>
          </tr>

          <tr>
            <td class="parameter">separation</td>
            <td class="datatype">double</td>
            <td class="description">The vertical separation distance between the two gratings [&micro;m]. This material is that of the bottom grating's <b>medium_i</b>, which must match the top grating's <b>medium_t</b>.</td>
            <td class="default">0</td>
          </tr>

        </table>

        <h2>See also:</h2>

        <p><a href=
        "index.htm">SCATMECH Home</a>, &nbsp; <a href=
        "rcwmodel.htm">RCW_Model</a>, &nbsp; <a href=
        "rcwbrdf.htm">RCW_BRDF_Model</a></p>

	<h2>Include file:</h2>

          <pre>
#include "<a href="../code/grating.h">grating.h</a>"
</pre>
        <h2>Source code:</h2>

          <pre>
<a href="../code/grating.cpp">grating.cpp</a>
</pre>

        <p><a href="#top"><span class="totop">Top of Page</span></a></p>


	<h2>Definition of public and protected elements</h2>

	<pre>
class Grating : public <a href="model.htm">Model</a> {
    public:
        virtual COMPLEX <a href="#fourier">fourier</a>(int order,int level,int recip=0) = 0;
        virtual int <a href="#get_levels">get_levels</a>()=0;
        virtual double <a href="#get_thickness">get_thickness</a>(int level) = 0;
        
        void <a href="#lambda">set_lambda</a>(double _lambda);
        double <a href="#lambda">get_lambda</a>();

    protected:
        COMPLEX <a href="#epsilon">epsilon</a>(const <a href="dielfunc.htm">dielectric_function</a>& e);
        double <a href="#lambda">lambda</a>;
};
</pre>

        <p><a href="#top"><span class="totop">Top of Page</span></a></p>

        <hr>

	<a name="fourier"><h3>virtual COMPLEX fourier(int order,int level,int recip=0) = 0</h3></a>

	<blockquote>
	<p>This virtual function must be defined for every model inheriting Grating and returns the fourier coefficient of 
	either the dielectric function (for <b>recip=0</b>) or the inverse of the dielectric function (for <b>recip=1</b>) for order <b>order</b> and
	level <b>level</b>. Level 0 is the level closest to the incident light.</p>

	</blockquote>

        <p><a href="#top"><span class="totop">Top of Page</span></a></p>

	<a name="get_levels"><h3>virtual int get_levels()=0</h3></a>

	<blockquote>
	<p>This virtual funciton must be defined for every model inheriting Grating and returns the number of layers in the 
	grating.</p>

	</blockquote>

        <p><a href="#top"><span class="totop">Top of Page</span></a></p>

        <a name="get_thickness"><h3>virtual double get_thickness(int level) = 0</h3></a>

	<blockquote>
	<p>This virtual funciton must be defined for every model inheriting Grating and returns the thickness of 
	level <b>level</b>, which must be non-negative.</p>

	</blockquote>

        <p><a href="#top"><span class="totop">Top of Page</span></a></p>


        <a name="lambda"><h3>void set_lambda(double _lambda)<br>double get_lambda()<br>double lambda</h3></a>
	<blockquote>
	<p>The wavelength of the light and functions to set and get it.  It is necessary to set this parameter so that the optical properties
	of the different materials can be set to that for the correct wavelength.</p>
	</blockquote>

        <p><a href="#top"><span class="totop">Top of Page</span></a></p>

        <a name="epsilon"><h3>COMPLEX epsilon(const dielectric_function& e)</h3></a>
	<blockquote>
	<p>Function that returns the dielectric function of the material <b>e</b> evaluated at <b>lambda</b>.</p>
	
	</blockquote>

        <p><a href="#top"><span class="totop">Top of Page</span></a></p>
	
	<a name="file" id="file"><!-- --></a>
	<h3>File format for Generic_Grating</h3>

        <blockquote><p>
          This section describes the file format required by
          Generic_Grating. The file is a text file. We will illustrate the format of 
	  the file using an example grating structure, shown below.  The example structure is symmetric, so 
	  some dimensions are not shown. Dimensions are generic and parameters can be passed to the model at a 
	  later time using the <b>pstring</b> parameter.  The example structure consists of a semiconductor line above
	  a thin film, surrounded by an isolation material.  
	  
              <center>
                <img src=
                "Images/FileGrating.gif" alt=
                "A diagram showing a structure with dimensions, materials, and vertices labeled.">
              </center>

	  <p> It is helpful, when writing a grating description, to make a diagram, such as that shown above, label all 
	  the parameters that could be free parameters (as done in blue, sans-serif type in the figure), label all regions with
	  their materials (as done in green, roman type in the figure), and label all vertices (as done in red, slanted sans-serif type in the figure).
	  Each of these items should be given unique names.  All boundaries between materials must be straight line segments, so if 
	  any of the boundaries are curved, they will need to be broken up into segments.  The material above the grating should be 
	  labeled <b>medium_i</b>, and the material below the grating should be labeled <b>medium_t</b>.

	  <p> There
          are five blocks (one is optional) of data in the file, and each begins with 
	  the name of the block and ends with the word <b>END</b>. In the following, the five blocks are described.  In the
	  text file, these blocks of data are listed consecutively and in order.  Comments can be located anywhere in the file, are 
	  delimited by a semicolon (;), and run to the end of the line.

          <h4>PARAMETERS block:</h4>
	  
	  <p>The first block of data contains a list of the parameters for 
	    the structure.  The number of parameters determines the number 
	    of values that must be passed to the parameter <b>pstring</b> at run time. The order 
	    of the parameters given in <b>pstring</b> must be the same as that listed
	    in the PARAMETERS block. For the example structure above, we would use,
              <pre>
	      PARAMETERS
	      height     ; The height of the structure
	      CD         ; The critical dimension
	      a          ; Corner rounding at the top of the line
	      b          ; Corner rounding at the bottom of the line
	      c          ; The height of the isolation material
	      width      ; The total width of the structure
	      d          ; Height of kink in isolation material
	      e          ; Horizontal offset of kink in isolation material 
	      t          ; The thickness of the oxide 
	      SWA        ; The sidewall angle (degrees)
	      n1         ; The refractive index of the isolation material
	      END
</pre>
            <p>which specifies that the model requires 11 parameters. Notice that one parameter, <b>n1</b> is not shown in the
	    figure, and corresponds to the index of refraction of the isolation material.  If <b>pstring</b> is given 
	    the value 
	    <pre>
	      "(0.2,0.1,0.01,0.01,0.15,0.3,0.1,0.02,0.02,85,1.8)"
</pre>
            <p>then <b>height</b> will be given the value 0.2, <b>CD</b> will be given the value 0.1, etc.  Also notice that 
	    the file can have any number of optional comments, which begin with semicolons and extend to the end of a line.
	    
	    <h4>WORKING block:</h4>

	    <p>The <b>WORKING</b> block is an optional block of instructions that is used to define temporary variables 
	    and calculate intermediate values used in subsequent calculations.  The block contains pairs of strings: the first in each 
	    pair represents an indentifier for a variable, while the second contains an arithmetic expression for that value.  The
	    arithmetic expression can use any of the parameters previously defined in the <b>WORKING</b> block, parameters defined in 
	    the <b>PARAMETERS</b> block, plus the additional parameters
	    <b>period</b> or <b>lambda</b>. For our example, we use

              <pre>
	      WORKING
	      tanSWA   tand(SWA)
	      cotSWA   if(tanSWA,1/tanSWA,0)   ; The cotangent of the angle
	      x1      -period/2
	      x2      period/2
	      x3      x1
	      x4      width/2
	      x5      x2
	      x6      -x4
	      x7      -CD/2-b
	      x8      -x7
	      x9      -CD/2+b*cotSWA
	      x10     -x9
	      x11     x6+e
	      x12     -x11
	      x13     -CD/2+c*cotSWA
	      x14     -x13
	      x15     -CD/2+(height-a)*cotSWA
	      x16     -x15
	      x17     -CD/2+height*cotSWA+a
	      x18     -x17
	      y1      -t
	      y2      -t
	      y3      0
	      y4      0
	      y5      0
	      y6      0
	      y7      0
	      y8      0
	      y9      b
	      y10     b
	      y11     d
	      y12     d
	      y13     c
	      y14     c
	      y15     height-a
	      y16     y15
	      y17     height
	      y18     height
	      END       
</pre>
            <p>The expressions should not contain spaces, unless they are surrounded by parentheses. Notice that the expressions can be quite complicated, too.
	    Many common functions and operations are available.  For trigonometric functions, there are additional functions ending with the letter <b>d</b>, 
	    which take arguments or return results in degrees rather than radians.

	    <p>A useful function that is available is the table expression: <tt>@file(x,icol)</tt>.  This function evaluates a table of values in the file <b>file</b>, 
	    at <b>x</b> using column <b>icol</b>.  For example, if <tt>glass</tt> is a file containing the optical properties for glass, <tt>@glass(lambda,2)</tt> will 
	    return the index of refraction evaluated at the wavelength.

          <h4>MATERIALS block:</h4>

            <p>The second block of data contains a list of materials
            used in the structure. For isotropic materials, each material is specified by a
	    pair of strings.  The first string is a name, which will be used
	    later to refer to that material.  The second string will be a value sent
	    to <a href="dielfunc.htm">dielectric_function</a>, which can be a
            complex number or a filename, and specifies the index of refraction of the material. 
	      The complex number may be specified as an expression using
	    the parameters above, plus the additional parameters <b>period</b> or <b>lambda</b>. 
            Two materials are predefined: <b>medium_i</b> and <b>medium_t</b>, which correspond to the
	    materials above and below the grating, respectively.  
	    For the example given above, we might use
              <pre>
	      MATERIALS
	      poly   polysilicon 
	      spacer (n1,0)
	      film   oxide
	      END       
</pre>
            <p>The first (<b>poly</b>) will obtain the complex index from a file named <tt>polysilicon</tt>.  
	    The second (<b>spacer</b>) will be 
	    non-absorbing, with an index given by the parameter <b>n1</b>.  Finally, the third (<b>film</b>)
	    will obtain the complex index from a file named <tt>oxide</tt>. 

            <p>Notice that the expressions for the complex index of refraction can be quite complicated.  This
	    allows the user to specify a functional form for a material.  For example, process variations can be specified with a parameter
	    <b>x</b>:</p>
	    <pre>
	      MATERIALS
	    material   (@MaterialA(lambda,2)*x+@MaterialB(lambda,2)*(1-x),
                        @MaterialA(lambda,3)*x+@MaterialB(lambda,3)*(1-x))
	      END
</pre>
           <p> Here, <b>MaterialA</b> and <b>MaterialB</b> are two files containing the optical properties of two materials, and the parameter <b>x</b> specifies
	    the extent the actual material behaves like one or the other.</p>

	   <p>Materials can be defined to be anisotropic, magnetic, or anisotropic and magnetic using 
	     the keywords <b>ANISO</b>, <b>MAGNETIC</b>, and <b>ANISOMAGNETIC</b>, respectively: </p>
	     <pre>
	       MATERIALS
	       ANISO materialA indexx indexy indexz
	       MAGNETIC materialB sqrteps sqrtmu
	       ANISOMAGNETIC materialC sqrtepsx sqrtepsy sqrtepsz sqrtmux sqrtmuy sqrtmuz
	       END
	       </pre>
	     <p>In the above example for <b>ANISO</b>, <b>materialA</b> is the name of the material, and
	       <b>indexx</b>, <b>indexy</b>, and <b>indexz</b> are the indices of refraction in the x, y, and z directions,
	       respectively. </p>
	       <p>In the above example for <b>MAGNETIC</b>, <b>materialB</b> is the name of the material, <b>sqrteps</b> is the
		square root of the dielectric function, and <b>sqrtmu</b> is the square root of the magnetic function.</p>
	       <p>In the above example for <b>ANISOMAGNETIC</b>, <b>materialC</b> is the name of the material, <b>sqrtepsx</b>, <b>sqrtepsy</b>, and
		 <b>sqrtepsz</b> are the square roots of the dielectric function in the x, y, and z directions, respectively, and <b>sqrtmux</b>, 
		 <b>sqrtmuy</b>, and <b>sqrtmuz</b> are the square roots of the magnetic function in the x, y, and z directions, respectively.</p>

          <h4>VERTICES block:</h4>

            <p>The third block contains a list of all of the vertices, giving each one 
	    a name and an (x,y) coordinate. The name is given first, followed by the (x,y) coordinate 
	    as a pair of expressions, separated by a comma and surrounded by parentheses.  
	    The expressions can use any of the parameters defined above, plus the additional parameters
	    <b>period</b> or <b>lambda</b>. For our example, we use
	      <pre>
	      VERTICES
	      v1 (x1,y1)
	      v2 (x2,y2)
	      v3 (x3,y3)
	      v4 (x4,y4)
	      v5 (x5,y5)
	      v6 (x6,y6)
	      v7 (x7,y7)
	      v8 (x8,y8)
	      v9 (x9,y9)
	      v10 (x10,y10)
	      v11 (x11,y11)
	      v12 (x12,y12)
	      v13 (x13,y13)
	      v14 (x14,y14)
	      v15 (x15,y15)
	      v16 (x16,y16)
	      v17 (x17,y17)
	      v18 (x18,y18)
	      END
</pre>

          <h4>BOUNDARIES block:</h4>

	  <p>The final section specifies all of the line
            segments dividing regions of materials. Each line
            segment is specified by two vertices (defined in the VERTICES section above)
	    and two materials (defined in the MATERIALS section above). 
            The materials are defined in order from the left material to the right
            material as one travels from the first vertex to the second.
            The period and height of the structure is defined by
            the minimum and maximum coordinates of all of the boundaries. That is, the actual period overrides the
	    parameter <b>period</b>.  
	    For our example, we would use
              <pre>
	      BOUNDARIES
	      v1   v2   film      medium_t
	      v3   v6   medium_i  film
	      v6   v7   spacer    film
	      v7   v8   poly      film
	      v8   v4   spacer    film
	      v4   v5   medium_i  film
	      v6   v11  medium_i  spacer
	      v11  v13  medium_i  spacer
	      v7   v9   spacer    poly
	      v9   v13  spacer    poly
	      v13  v15  medium_i  poly
	      v15  v17  medium_i  poly
	      v17  v18  medium_i  poly 
	      v18  v16  medium_i  poly
	      v16  v14  medium_i  poly
	      v14  v12  medium_i  spacer
	      v12  v4   medium_i  spacer
	      v14  v10  spacer    poly
	      v10  v8   spacer    poly
	      END
</pre>
            
	    <h4>Notes:</h4>
	  <p>The thickness of the layers is determined by
          ordering all of the vertical coordinates specified to
          ensure that these distances are accurate and not
          discretized by the number of layers. The number of layers
	  given in any sub-layer is determined by the largest horizontal 
	  distance traversed by a diagonal in that sub-layer (ignoring boundaries between identical materials).

	  <p>It is up to the user to ensure that the line segments 
	  are consistent with one other.  If the program finds a problem
	  with the segment definitions, it will throw a <a href="except.htm">SCATMECH_exception</a>.

	  <p>While the variable <b>period</b> will be assigned the value given by the parameter by the same name, the 
	  actual period of the grating will be defined by the extent of the grating defined in the BOUNDARIES section.

	  <p>The vertical coordinates may be referenced to any level, and one may choose whichever level is convenient to call zero.
	  However, <a href="rcwmodel.htm">RCW_Model</a> will always reference fields to the top of the grating, no matter what the vertical 
	  coordinate was in the file.

        </blockquote>

        <p><a href="#top"><span class="totop">Top of Page</span></a></p>

<!-- START FOOTER -->
<hr>
<h2>For More Information</h2>

<p>
<a href="https://www.nist.gov/people/thomas-germer">SCATMECH Technical Information and Questions</a><br>
<a href="http://www.nist.gov/pml/div685/index.cfm" target="_top">Sensor Science Division Home Page</a><br>
<a href="mailto:fraser@nist.gov">Sensor Science Division Inquiries</a><br>
<a href="mailto:thomas.germer@nist.gov">Website Comments</a>

<p>
Current SCATMECH version: <a href="./download.htm">7.22 (April 2021)</a><br>
<br>

</td>
</tr>
</table>

</body>
</html>
